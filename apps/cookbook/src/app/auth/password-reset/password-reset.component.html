<header>
  <div class="title">
    <h1>Modification du mot de passe</h1>
  </div>
</header>

<div [ngSwitch]="state">
  <section *ngSwitchCase="'done'" class="title-explain">
    <form
      class="form"
      [formGroup]="resetPasswordForm"
      (ngSubmit)="changePassword()"
    >
      <mat-form-field>
        <mat-label>Nouveau mot de passe</mat-label>
        <input
          matInput
          formControlName="password"
          type="password"
          minLength="8"
          required
        />
        <mat-error
          *ngIf="resetPasswordForm.controls.password.errors?.['required']"
          >Ce champ est obligatoire</mat-error
        >
      </mat-form-field>

      <mat-form-field>
        <mat-label>Confirmation du Mot de passe</mat-label>
        <input
          matInput
          formControlName="confirmPassword"
          type="password"
          required
        />
        <mat-error
          *ngIf="resetPasswordForm.controls.confirmPassword.errors?.['required']"
          >Ce champ est obligatoire</mat-error
        >
        <mat-error
          *ngIf="resetPasswordForm.controls.confirmPassword.errors?.['passwordmatcherror']"
          >Les mots de passe ne correspondent pas</mat-error
        >
      </mat-form-field>
      <button
        mat-raised-button
        color="accent"
        type="submit"
        [disabled]="resetPasswordForm.invalid"
      >
        Modifier le mot de passe
      </button>
    </form>
  </section>
  <section *ngSwitchCase="'invalid'" class="title-explain">
    <h2>Désolé, {{ errorMessage }} !</h2>
  </section>
  <section *ngSwitchCase="'error'" class="title-explain">
    <h2>Une erreur s'est produite</h2>
    <p>Veuillez réessayer plus tard.</p>
  </section>
  <section *ngSwitchCase="'loading'" class="title-explain">
    <h2>Vérification en cours</h2>
  </section>
</div>
